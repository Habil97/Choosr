@model Choosr.Web.ViewModels.LeaderboardViewModel
@{
  ViewData["Title"] = $"{Model.QuizTitle} | Liderlik ({Model.Period} ¬∑ {Model.Mode})";
}

<section class="layout-container py-4">
  <a class="back-link d-inline-flex align-items-center mb-3 text-decoration-none" asp-controller="Quiz" asp-action="Detail" asp-route-id="@Model.QuizId">‚Üê Quiz'e d√∂n</a>

  <div class="text-center">
    <div class="mb-2" style="color:#ffd54a;font-weight:900;letter-spacing:.06em;text-transform:uppercase;">Liderlik</div>
    <h1 class="mb-2" style="font-weight:800;">@Model.QuizTitle</h1>

    <div class="d-flex justify-content-center gap-2 mb-2 flex-wrap">
      <div class="btn-group" role="group" aria-label="Periyot">
        <a class="btn btn-sm @(Model.Period=="Haftalƒ±k"?"btn-warning text-dark":"btn-outline-secondary")" asp-controller="Leaderboard" asp-action="Index" asp-route-id="@Model.QuizId" asp-route-period="week" asp-route-mode="@(Model.Mode=="Olu≈üturucu"?"creator":"player")" asp-route-metric="@(Model.Metric=="Tekil Oyuncu"?"unique":"plays")">Haftalƒ±k</a>
        <a class="btn btn-sm @(Model.Period=="Aylƒ±k"?"btn-warning text-dark":"btn-outline-secondary")" asp-controller="Leaderboard" asp-action="Index" asp-route-id="@Model.QuizId" asp-route-period="month" asp-route-mode="@(Model.Mode=="Olu≈üturucu"?"creator":"player")" asp-route-metric="@(Model.Metric=="Tekil Oyuncu"?"unique":"plays")">Aylƒ±k</a>
      </div>
      <div class="btn-group" role="group" aria-label="Mod">
        <a class="btn btn-sm @(Model.Mode=="Olu≈üturucu"?"btn-warning text-dark":"btn-outline-secondary")" asp-controller="Leaderboard" asp-action="Index" asp-route-id="@Model.QuizId" asp-route-mode="creator" asp-route-period="@(Model.Period=="Aylƒ±k"?"month":"week")" asp-route-metric="@(Model.Metric=="Tekil Oyuncu"?"unique":"plays")">Olu≈üturucu</a>
        <a class="btn btn-sm @(Model.Mode=="Oyuncu"?"btn-warning text-dark":"btn-outline-secondary")" asp-controller="Leaderboard" asp-action="Index" asp-route-id="@Model.QuizId" asp-route-mode="player" asp-route-period="@(Model.Period=="Aylƒ±k"?"month":"week")" asp-route-metric="@(Model.Metric=="Tekil Oyuncu"?"unique":"plays")">Oyuncu</a>
      </div>
      <div class="btn-group" role="group" aria-label="Metrik">
        <a class="btn btn-sm @(Model.Metric=="Toplam Oyun"?"btn-warning text-dark":"btn-outline-secondary")" asp-controller="Leaderboard" asp-action="Index" asp-route-id="@Model.QuizId" asp-route-period="@(Model.Period=="Aylƒ±k"?"month":"week")" asp-route-mode="@(Model.Mode=="Olu≈üturucu"?"creator":"player")" asp-route-metric="plays">Toplam Oyun</a>
        <a class="btn btn-sm @(Model.Metric=="Tekil Oyuncu"?"btn-warning text-dark":"btn-outline-secondary")" asp-controller="Leaderboard" asp-action="Index" asp-route-id="@Model.QuizId" asp-route-period="@(Model.Period=="Aylƒ±k"?"month":"week")" asp-route-mode="@(Model.Mode=="Olu≈üturucu"?"creator":"player")" asp-route-metric="unique">Tekil Oyuncu</a>
      </div>
      <div class="ms-2 d-flex align-items-center">
        <a class="btn btn-sm d-inline-flex align-items-center gap-2" asp-controller="Leaderboard" asp-action="Creators" asp-route-metric="@(Model.Metric=="Tekil Oyuncu"?"unique":"plays")" style="background:#1e1f24;border:1px solid rgba(255,255,255,.12);color:#fff;border-radius:999px;padding:.35rem .75rem;">
          <span style="display:inline-flex;width:18px;height:18px;align-items:center;justify-content:center;">üåç</span>
          <span>Global Olu≈üturucu Liderliƒüi</span>
        </a>
      </div>
    </div>
    <div class="mb-3 text-center">
      <span class="badge rounded-pill bg-secondary">G√∂r√ºnt√ºlenen: @Model.Period ‚Ä¢ @Model.Mode ‚Ä¢ @Model.Metric</span>
    </div>

    <div class="card bg-dark text-light mx-auto" style="max-width:820px;border:1px solid rgba(255,255,255,.08);">
      <div class="card-body p-0">
        <div class="table-responsive">
          <table class="table table-dark table-hover mb-0 align-middle">
            <thead>
              <tr>
                <th style="width:64px;">#</th>
                <th>Kullanƒ±cƒ±</th>
                <th class="text-end">Oyun</th>
              </tr>
            </thead>
            <tbody>
              @if(Model.Entries.Count == 0){
                <tr><td colspan="3" class="text-center text-muted py-4">Hen√ºz veri yok.</td></tr>
              } else {
                var rank = 1;
                foreach(var e in Model.Entries){
                  <tr>
                    <td class="fw-bold">@("#" + (rank++))</td>
                    <td>
                      <div class="d-flex align-items-center gap-2">
                        <a class="d-inline-flex align-items-center gap-2 text-decoration-none" asp-controller="PublicProfile" asp-action="Show" asp-route-userName="@e.UserName">
                          <span class="avatar-thumb"><img src="@(string.IsNullOrWhiteSpace(e.AvatarUrl)?"/favicon.ico":e.AvatarUrl)" alt="" style="width:24px;height:24px;border-radius:50%;object-fit:cover;"/></span>
                          <span>@(string.IsNullOrWhiteSpace(e.DisplayName) ? e.UserName : e.DisplayName)</span>
                        </a>
                      </div>
                    </td>
                    <td class="text-end">
                      <span class="badge bg-warning text-dark" style="font-size:.95rem;">@e.Plays</span>
                    </td>
                  </tr>
                }
              }
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="text-center mt-3">
      <a class="btn btn-sm btn-outline-secondary" asp-controller="Leaderboard" asp-action="Index" asp-route-id="@Model.QuizId" asp-route-period="@(Model.Period=="Aylƒ±k"?"month":"week")" asp-route-mode="@(Model.Mode=="Olu≈üturucu"?"creator":"player")" asp-route-metric="@(Model.Metric=="Tekil Oyuncu"?"unique":"plays")" asp-route-top="@(Model.Top+20)">Daha Fazla</a>
    </div>
  </div>
</section>
